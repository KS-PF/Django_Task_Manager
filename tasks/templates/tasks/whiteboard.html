{% extends 'base_sidebar.html' %}
{% load static %}
{% block title %}{{ user.last_name }} {{ user.first_name }}{% endblock %}


{% block content %}

<div style="height: 40px;"></div>


<div style="height: 40px;"></div>

<p>{{ date_range }}</p>

<div class="tasks-table">
    <table>
        <tr>
            <th colspan="3"><label>タスク一覧</label></th>
        </tr>

        <tr>
            <th>未着手</th>
            <th>取組中</th>
            <th>完了</th>
        </tr>

        <tr>
            <th>
                {% for task in tasks %}
                    {% if task.progress_status == '未着手' %}
                    <a href="{% url 'tasks:task_update' task.pk %}">
                        <div class="tasks-box yet">
                            <p>{{ task.name }}</p>
                            <p class="p-small">{{ task.description }}</p>
                            <p class="p-small">{{ task.team_id }}</p>
                            <p class="p-small">ID:{{ task.task_id }} | 期日：{{ task.end_date.year }}年{{ task.end_date.month }}月{{ task.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ task.created_by.last_name }}{{ task.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>

            <th>
                {% for task in tasks %}
                    {% if task.progress_status == '取組み中' %}
                    <a href="{% url 'tasks:task_update' task.pk %}">
                        <div class="tasks-box pro">
                            <p>{{ task.name }}</p>
                            <p class="p-small">{{ task.description }}</p>
                            <p class="p-small">{{ task.team_id }}</p>
                            <p class="p-small">ID:{{ task.task_id }} | 期日：{{ task.end_date.year }}年{{ task.end_date.month }}月{{ task.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ task.created_by.last_name }}{{ task.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>

            <th>
                {% for task in tasks %}
                    {% if task.progress_status == '完了' %}
                    <a href="{% url 'tasks:task_update' task.pk %}">
                        <div class="tasks-box fin">
                            <p>{{ task.name }}</p>
                            <p class="p-small">{{ task.description }}</p>
                            <p class="p-small">{{ task.team_id }}</p>
                            <p class="p-small">ID:{{ task.task_id }} | 期日：{{ task.end_date.year }}年{{ task.end_date.month }}月{{ task.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ task.created_by.last_name }}{{ task.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>
        </tr>

    </table>
</div>


<div style="height: 40px;"></div>
<div style="height: 40px;"></div>

<p>{{ date_range }}</p>
<div class="tasks-table">
    <table>
        <tr>
            <th colspan="3"><label>サブタスク一覧</label></th>
        </tr>

        <tr>
            <th>未着手</th>
            <th>取組中</th>
            <th>完了</th>
        </tr>

        <tr>
            <th>
                {% for subtask in subtasks %}
                    {% if subtask.progress_status == '未着手' %}
                    <a href="{% url 'tasks:subtask_update' subtask.pk %}">
                        <div class="tasks-box yet">
                            <p>{{ subtask.name }}</p>
                            <p class="p-small">{{ subtask.description }}</p>
                            <p class="p-small">親タスク：「{{ subtask.task_id }}」</p>
                            <p class="p-small">{{ subtask.task_id.team_id }}</p>
                            <p class="p-small">ID:{{ subtask.id }} | 期日：{{ subtask.end_date.year }}年{{ subtask.end_date.month }}月{{ subtask.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ subtask.created_by.last_name }}{{ subtask.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>

            <th>
                {% for subtask in subtasks %}
                    {% if subtask.progress_status == '取組み中' %}
                    <a href="{% url 'tasks:subtask_update' subtask.pk %}">
                        <div class="tasks-box pro">
                            <p>{{ subtask.name }}</p>
                            <p class="p-small">{{ subtask.description }}</p>
                            <p class="p-small">親タスク：「{{ subtask.task_id }}」</p>
                            <p class="p-small">{{ subtask.task_id.team_id }}</p>
                            <p class="p-small">ID:{{ subtask.id }} | 期日：{{ subtask.end_date.year }}年{{ subtask.end_date.month }}月{{ subtask.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ subtask.created_by.last_name }}{{ subtask.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>

            <th>
                {% for subtask in subtasks %}
                    {% if subtask.progress_status == '完了' %}
                    <a href="{% url 'tasks:subtask_update' subtask.pk %}">
                        <div class="tasks-box fin">
                            <p>{{ subtask.name }}</p>
                            <p class="p-small">{{ subtask.description }}</p>
                            <p class="p-small">親タスク：「{{ subtask.task_id }}」</p>
                            <p class="p-small">{{ subtask.task_id.team_id }}</p>
                            <p class="p-small">ID:{{ subtask.id }} | 期日：{{ subtask.end_date.year }}年{{ subtask.end_date.month }}月{{ subtask.end_date.day }}日</p>
                            <p class="p-small">作成者：{{ subtask.created_by.last_name }}{{ subtask.created_by.first_name }}</p>
                        </div>
                    </a>
                    {% endif %}
                {% endfor %}
            </th>
        </tr>

    </table>
</div>


<div style="height: 40px;"></div>
<div style="height: 40px;"></div>
<div style="height: 48px;"></div>
<script src="{% static 'js/script.js' %}"></script>
{% endblock %}